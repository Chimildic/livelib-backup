const STATUS = {
    starting: [
        '–û–∂–∏–¥–∞—é –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞',
        '–í–ø–µ—Ä–µ–¥, –≤ –±–µ–∑–¥–Ω—É!',
        '–ü–µ—Ä–≤—ã–π —à–∞–≥, –∞ —Ç–∞–º –ø–æ—Å–º–æ—Ç—Ä–∏–º...',
        '–ü–æ–µ—Ö–∞–ª–∏!',
        '–•—å—é—Å—Ç–æ–Ω, —É –Ω–∞—Å –∫–æ–Ω—Ç–∞–∫—Ç',
        '–ì–ª—É–±–æ–∫–æ –≤–¥–æ—Ö–Ω—É–ª–∏ –∏... –ø–∞—Ä—Å–∏–º!',
        '–ì–ª–∞–∑–∞ –±–æ—è—Ç—Å—è üëÄ –∞ –ø–∞—Ä—Å–µ—Ä –¥–µ–ª–∞–µ—Ç',
        '–ú–∞—Ö–æ–≤–∏–∫ –∑–∞–ø—É—â–µ–Ω, –Ω–∞–∑–∞–¥ –ø—É—Ç–∏ –Ω–µ—Ç',
        '–ò—Å–ø–æ–ª—å–∑—É—é –º–∞–≥–∏—é –≤–Ω–µ –•–æ–≥–≤–∞—Ä—Ç—Å–∞, –Ω–∏–∫–æ–º—É –Ω–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–π ü§´',
        '–î–∞–∂–µ –∫–∞—Ä—Ç–∞ –ú–∞—Ä–æ–¥–µ—Ä–æ–≤ –Ω–µ —Å–æ–±–∏—Ä–µ—Ç —Å—Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏',
        '–ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –Ω–∞—Å –≤ –¢–∞–π–Ω—É—é –ö–æ–º–Ω–∞—Ç—É',
        '–ù—É-—Å, ‚Äì –±–æ–¥—Ä–æ —Å–∫–∞–∑–∞–ª –æ–Ω, ‚Äì –Ω–∞—á–Ω–µ–º –ø–æ–∂–∞–ª—É–π',
        '–î–∞ –±—É–¥–µ—Ç –±–∞–ª, –¥–∞ –Ω–∞—á–Ω—É—Ç—Å—è —Ç–∞–Ω—Ü—ã! üíÉ',
        '–≠—Ç–æ –±—É–¥–µ—Ç –ª–µ–≥–µ–Ω... –ø–æ—Å—Ç–æ–π, –ø–æ–¥–æ–∂–¥–∏-–ø–æ–¥–æ–∂–¥–∏... –¥–∞—Ä–Ω–æ! –ü—Ä–æ—Ü–µ—Å—Å –ø–æ—à–µ–ª',
        '–î–∞–∂–µ —Ç—ã—Å—è—á–µ–º–∏–ª—å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å... –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞. –õ–∞–¥–Ω–æ, –º–µ—Ç–∞—Ñ–æ—Ä–∞ —Ç–∞–∫ —Å–µ–±–µ, –Ω–æ —Å—É—Ç—å —è—Å–Ω–∞',
        '–ó–∞—è—Ü, –í–æ–ª–∫, –ó–∞—è—Ü, –í–æ–ª–∫',
        '–†–∞–±–æ—Ç–∞–µ—Ç? –ù–µ –∑–Ω–∞—é, –Ω–æ –∫–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞',
        '–ê –ø–æ–∫–∞ –ø–æ–∫–æ—Ä–º–∏—Ç–µ –∫–æ—Ç–µ–π–∫—É üê± –ù—É, –∏–ª–∏ —Å–µ–±—è?',
        '–í—ã –∑–Ω–∞–ª–∏ —á—Ç–æ –ê–ª–∏—Å–∞ —É–º–µ–µ—Ç –æ–∑–≤—É—á–∏–≤–∞—Ç—å –∫–Ω–∏–≥–∏? –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Ç–æ–∂–µ',
        '–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª? –õ–µ–≥—á–µ –ª—ë–≥–∫–æ–≥–æ, –∫–æ–≥–¥–∞ —É —Ç–µ–±—è –µ—Å—Ç—å –∫—É—á–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–∞—Ä—Å–∏–∞–Ω—Å–∫–∞—è –ø—ã–ª—å –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ.',
        '–°–∫—Ä–∏–ø–Ω—É–ª–∏ —à–µ—Å—Ç–µ—Ä–Ω–∏ –º–∏—Ä–æ–∑–¥–∞–Ω–∏—è. –ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞–ø—É—â–µ–Ω, –æ—Ç—Å—á—ë—Ç –Ω–∞—á–∞–ª—Å—è.',
    ],
    isNotLastPage: [
        '–ü—Ä–æ–¥–æ–ª–∂–∞—é —Å–æ–±–∏—Ä–∞—Ç—å –∫–Ω–∏–∂–∫–∏',
        '–ö–∞–∂–µ—Ç—Å—è, –∫—Ç–æ-—Ç–æ –æ–≥—Ä–∞–±–∏–ª –±–∏–±–ª–∏–æ—Ç–µ–∫—É?',
        '–í—ã —Ç–æ—á–Ω–æ –≤—Å—ë —ç—Ç–æ —á–∏—Ç–∞–ª–∏, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ö–≤–∞—Å—Ç–∞–µ—Ç–µ—Å—å?',
        '–í—ã, –Ω–∞–≤–µ—Ä–Ω–æ–µ, —Ç–æ—Ç —Å–∞–º—ã–π –∫–Ω–∏–∂–Ω—ã–π —á–µ—Ä–≤—å, –æ –∫–æ—Ç–æ—Ä–æ–º –≤—Å–µ –≥–æ–≤–æ—Ä—è—Ç?',
        '–í–∞–º —Å—Ä–æ—á–Ω–æ –Ω—É–∂–µ–Ω –∫–Ω–∏–∂–Ω—ã–π —à–∫–∞—Ñ –ø–æ–±–æ–ª—å—à–µ, –∞ –ª—É—á—à–µ –¥–≤–∞!',
        '–Ø –Ω–µ –∑–∞–≤–∏—Å (–Ω–∞–≤–µ—Ä–Ω–æ–µ)',
        'while (true) read()',
        '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –≤—ã —Ç–∞–∫–∂–µ —É–≤–ª–µ—á—ë–Ω–Ω–æ —á–∏—Ç–∞–µ—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫ –±—ã—Ç–æ–≤–æ–π —Ç–µ—Ö–Ω–∏–∫–µ?',
    ],
    creatingFile: [
        '–ó–∞–ø–∏—Å—ã–≤–∞—é –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª',
        '–°—Ç—Ä–æ–∫–∞ –∑–∞ —Å—Ç—Ä–æ–∫–æ–π, —Ñ–∞–π–ª —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç —Ç–≤–æ–π',
    ],
    result: [
        '–Ø —ç—Ç–æ —Å–¥–µ–ª–∞–ª! ...–ù–∞–¥–µ—é—Å—å, –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–º–µ—Ç–∏–ª, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —è –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞–ª',
        '–§–∏–Ω–∏—Ç–∞ –ª—è –∫–æ–º–µ–¥–∏—è! –ò –ø—É—Å—Ç—å –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª... —Å–∏–ª—å–Ω–æ.',
        '–®–∞–ª–æ—Å—Ç—å —É–¥–∞–ª–∞—Å—å!',
        '–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–º–µ–Ω—å —É–ª–æ–∂–µ–Ω. –ü–∏—Ä–∞–º–∏–¥–∞ –∂–¥—ë—Ç —Å–≤–æ–µ–≥–æ —Ñ–∞—Ä–∞–æ–Ω–∞.',
        '–ß—Ç–æ –∂, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, —è –Ω–µ —Å–ø–∞–ª–∏–ª –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑. –£–∂–µ —É—Å–ø–µ—Ö.',
        '–ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–±—Ä–∞—Ç—å —Å–≤–æ–∏ –≤–µ—â–∏: –ø–æ—Ä—Ç–∞–ª—å–Ω—É—é –ø—É—à–∫—É, —á—É–≤—Å—Ç–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–∞–∂–Ω–æ—Å—Ç–∏... –ê—Ö –¥–∞, –∏ –ø–∏—Ä–æ–∂–æ–∫, –∫–æ–Ω–µ—á–Ω–æ. –ö—É–¥–∞ –±–µ–∑ –Ω–µ–≥–æ.',
        '–ù—É –≤–æ—Ç –∏ –≤—Å—ë! ...–ê —á—Ç–æ, –≤—ã —É–∂–µ –∞–ø–ª–æ–¥–∏—Ä—É–µ—Ç–µ? –ù–µ—Ç? –°—Ç—Ä–∞–Ω–Ω–æ...',
        '–ê —Ç–µ–ø–µ—Ä—å –≥–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –∫–∞–∫ —ç—Ç–æ –≤—ã–∫–ª—é—á–∏—Ç—å, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞—Ç—å?',
        'üíØ',
        '–ú—É–ª—å—Ç–∏—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–æ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ü–∏–∫–ª –æ–ø–µ—Ä–∞—Ü–∏–π, –ø–µ—Ä–µ—Ö–æ–¥—è –≤ —Ä–µ–∂–∏–º –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–≥–æ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è',
    ]
}

const modal = bootstrap.Modal.getOrCreateInstance(document.getElementById('modal'))
const modalTitle = document.getElementById('modalTitle')
const donateModalButton = document.getElementById('donateModalButton')
const closeModalButton = document.getElementById('closeModalButton')
const cancelExportButton = document.getElementById('cancelExportButton')
const spinner = document.getElementById('spinnerStatus')

donateModalButton.addEventListener('click', onDonateButtonClick)

function onDonateButtonClick() {
    window.open('https://yoomoney.ru/to/410014208620686', '_blank')
    modal.hide()
}

function showProgressModal(status) {
    modalTitle.innerText = '‚è±Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ'
    donateModalButton.classList.add('d-none')
    closeModalButton.classList.add('d-none')
    cancelExportButton.classList.remove('d-none')
    spinner.classList.remove('d-none')
    setStatusText(status)
    modal.show()
}

function showResultModal(status) {
    modalTitle.innerText = '‚úÖ –ì–æ—Ç–æ–≤–æ'
    donateModalButton.classList.remove('d-none')
    closeModalButton.classList.remove('d-none')
    cancelExportButton.classList.add('d-none')
    spinner.classList.add('d-none')
    setStatusText(status)
    modal.show()
}

function showErrorModal(status) {
    modalTitle.innerText = '‚ùå –û—à–∏–±–∫–∞'
    donateModalButton.classList.add('d-none')
    closeModalButton.classList.remove('d-none')
    cancelExportButton.classList.add('d-none')
    spinner.classList.add('d-none')
    setStatusText(status)
    modal.show()
}

function setStatusText(status) {
    let text = Array.isArray(status) ? status[randomInt(status.length)] : status
    document.getElementById('statusText').innerText = text
}

function randomInt(max) {
    return Math.floor(Math.random() * max)
}
